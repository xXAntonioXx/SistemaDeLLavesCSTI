-- MySQL dump 10.13  Distrib 8.0.12, for Win64 (x86_64)
--
-- Host: localhost    Database: sistema_llaves
-- ------------------------------------------------------
-- Server version	8.0.12

/*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */;
/*!40101 SET @OLD_CHARACTER_SET_RESULTS=@@CHARACTER_SET_RESULTS */;
/*!40101 SET @OLD_COLLATION_CONNECTION=@@COLLATION_CONNECTION */;
 SET NAMES utf8mb4 ;
/*!40103 SET @OLD_TIME_ZONE=@@TIME_ZONE */;
/*!40103 SET TIME_ZONE='+00:00' */;
/*!40014 SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0 */;
/*!40014 SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0 */;
/*!40101 SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='NO_AUTO_VALUE_ON_ZERO' */;
/*!40111 SET @OLD_SQL_NOTES=@@SQL_NOTES, SQL_NOTES=0 */;

--
-- Table structure for table `taulas`
--

DROP TABLE IF EXISTS `taulas`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
 SET character_set_client = utf8mb4 ;
CREATE TABLE `taulas` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `numero` int(11) DEFAULT NULL,
  `area` varchar(10) DEFAULT NULL,
  `aula` varchar(10) DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `numero` (`numero`)
) ENGINE=InnoDB AUTO_INCREMENT=45 DEFAULT CHARSET=utf8 COLLATE=utf8_general_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `taulas`
--

LOCK TABLES `taulas` WRITE;
/*!40000 ALTER TABLE `taulas` DISABLE KEYS */;
INSERT INTO `taulas` VALUES (1,1,'5K','101'),(2,2,'5K','102'),(3,3,'5K','201'),(4,4,'5K','202'),(5,5,'5K','203'),(6,6,'5K','204'),(7,7,'5K','205'),(8,8,'5K','301'),(9,9,'5K','302'),(10,10,'5K','303'),(11,11,'5K','304'),(12,12,'5K','305'),(13,13,'5M','201'),(14,14,'5M','202'),(15,15,'5M','203'),(16,16,'5M','205'),(17,17,'5M','206'),(18,18,'5G','101'),(19,19,'5G','102'),(20,20,'5G','201'),(21,21,'5G','202'),(22,22,'5G','203'),(23,23,'5G','CSTI'),(24,24,'5G','205'),(25,26,'5O','301'),(26,27,'5O','302'),(27,28,'5O','303'),(28,29,'5O','304'),(29,30,'5O','ERGONOMIA'),(30,31,'5O','101'),(31,32,'5R','101'),(32,33,'5R','102'),(33,34,'5R','103'),(34,35,'5R','201'),(35,36,'5J','201'),(36,37,'5J','202'),(37,38,'5J','203'),(38,39,'5J','204'),(39,40,'5J','301'),(40,41,'5J','302'),(41,42,'5J','303'),(42,43,'5J','304'),(43,44,'5J','305'),(44,45,'8B','120');
/*!40000 ALTER TABLE `taulas` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `tcontrolhorarios`
--

DROP TABLE IF EXISTS `tcontrolhorarios`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
 SET character_set_client = utf8mb4 ;
CREATE TABLE `tcontrolhorarios` (
  `id_registro` int(11) NOT NULL,
  `codigo_llave` bigint(20) NOT NULL,
  `id_horario` int(11) NOT NULL,
  `estado` tinyint(1) DEFAULT '0',
  PRIMARY KEY (`id_registro`,`codigo_llave`,`id_horario`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_general_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `tcontrolhorarios`
--

LOCK TABLES `tcontrolhorarios` WRITE;
/*!40000 ALTER TABLE `tcontrolhorarios` DISABLE KEYS */;
/*!40000 ALTER TABLE `tcontrolhorarios` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `tdias`
--

DROP TABLE IF EXISTS `tdias`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
 SET character_set_client = utf8mb4 ;
CREATE TABLE `tdias` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `dias` varchar(52) NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=11 DEFAULT CHARSET=utf8 COLLATE=utf8_general_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `tdias`
--

LOCK TABLES `tdias` WRITE;
/*!40000 ALTER TABLE `tdias` DISABLE KEYS */;
INSERT INTO `tdias` VALUES (1,'LUNES,MARTES,MIERCOLES,JUEVES'),(2,'LUNES,MARTES,MIERCOLES'),(3,'LUNES,MARTES,MIERCOLES,JUEVES,VIERNES'),(4,'VIERNES'),(5,'LUNES,MARTES'),(6,'LUNES'),(7,'MARTES'),(8,'JUEVES'),(9,'MIERCOLES'),(10,'SABADO');
/*!40000 ALTER TABLE `tdias` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `tdias_horas`
--

DROP TABLE IF EXISTS `tdias_horas`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
 SET character_set_client = utf8mb4 ;
CREATE TABLE `tdias_horas` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `idDias` int(11) NOT NULL,
  `idHoras` int(11) NOT NULL,
  PRIMARY KEY (`id`),
  KEY `FK_tdias_horas_tdias` (`idDias`),
  KEY `FK_tdias_horas_thoras` (`idHoras`),
  CONSTRAINT `FK_tdias_horas_tdias` FOREIGN KEY (`idDias`) REFERENCES `tdias` (`id`),
  CONSTRAINT `FK_tdias_horas_thoras` FOREIGN KEY (`idHoras`) REFERENCES `thoras` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=72 DEFAULT CHARSET=utf8 COLLATE=utf8_general_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `tdias_horas`
--

LOCK TABLES `tdias_horas` WRITE;
/*!40000 ALTER TABLE `tdias_horas` DISABLE KEYS */;
INSERT INTO `tdias_horas` VALUES (1,1,1),(2,1,2),(3,1,3),(4,1,4),(5,1,5),(6,1,6),(7,1,7),(8,1,8),(9,1,9),(10,1,10),(11,1,11),(12,1,12),(13,1,13),(14,2,9),(15,3,6),(16,3,10),(17,3,13),(18,2,11),(19,3,5),(20,1,14),(21,2,13),(22,3,7),(23,2,4),(24,3,1),(25,4,13),(26,3,8),(27,2,3),(28,2,7),(29,2,12),(30,3,4),(31,3,11),(32,3,12),(33,3,9),(34,3,3),(35,3,2),(36,3,14),(37,2,8),(38,2,14),(39,2,2),(40,2,1),(41,2,5),(42,2,6),(43,4,7),(44,4,4),(45,5,5),(46,5,11),(47,4,2),(48,2,10),(49,5,12),(50,6,15),(51,6,16),(52,7,17),(53,7,18),(54,7,19),(55,8,20),(56,4,21),(57,4,22),(58,9,23),(59,10,24),(60,8,23),(61,4,16),(62,10,25),(63,10,18),(64,10,26),(65,9,14),(66,6,27),(67,6,3),(68,9,3),(69,9,8),(70,8,27),(71,7,28);
/*!40000 ALTER TABLE `tdias_horas` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `texcepciones`
--

DROP TABLE IF EXISTS `texcepciones`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
 SET character_set_client = utf8mb4 ;
CREATE TABLE `texcepciones` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `num_aula` int(11) DEFAULT NULL,
  `num_emp` int(11) NOT NULL,
  PRIMARY KEY (`id`),
  KEY `FK_texcepciones_tllaves` (`num_aula`),
  CONSTRAINT `FK_texcepciones_tllaves` FOREIGN KEY (`num_aula`) REFERENCES `taulas` (`numero`) ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_general_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `texcepciones`
--

LOCK TABLES `texcepciones` WRITE;
/*!40000 ALTER TABLE `texcepciones` DISABLE KEYS */;
/*!40000 ALTER TABLE `texcepciones` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `thorarios`
--

DROP TABLE IF EXISTS `thorarios`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
 SET character_set_client = utf8mb4 ;
CREATE TABLE `thorarios` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `year` year(4) NOT NULL,
  `ciclo` char(1) NOT NULL,
  `num_aula` int(11) NOT NULL,
  `num_emp_maestro` int(11) NOT NULL,
  `id_materia` int(11) NOT NULL,
  `id_dias_horas` int(11) NOT NULL,
  PRIMARY KEY (`id`),
  KEY `FK_thorarios_taulas` (`num_aula`),
  KEY `FK_thorarios_tmaestros` (`num_emp_maestro`),
  KEY `FK_thorarios_tmaterias` (`id_materia`),
  KEY `FK_thorarios_tdias_horas` (`id_dias_horas`),
  CONSTRAINT `FK_thorarios_taulas` FOREIGN KEY (`num_aula`) REFERENCES `taulas` (`numero`),
  CONSTRAINT `FK_thorarios_tdias_horas` FOREIGN KEY (`id_dias_horas`) REFERENCES `tdias_horas` (`id`),
  CONSTRAINT `FK_thorarios_tmaestros` FOREIGN KEY (`num_emp_maestro`) REFERENCES `tmaestros` (`num_emp`),
  CONSTRAINT `FK_thorarios_tmaterias` FOREIGN KEY (`id_materia`) REFERENCES `tmaterias` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=330 DEFAULT CHARSET=utf8 COLLATE=utf8_general_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `thorarios`
--

LOCK TABLES `thorarios` WRITE;
/*!40000 ALTER TABLE `thorarios` DISABLE KEYS */;
INSERT INTO `thorarios` VALUES (1,2019,'1',18,1,1,1),(2,2019,'1',18,1,1,2),(3,2019,'1',18,1,1,3),(4,2019,'1',18,21402,2,4),(5,2019,'1',18,21402,3,5),(6,2019,'1',18,21402,4,6),(7,2019,'1',18,25960,5,7),(8,2019,'1',18,25960,5,8),(9,2019,'1',18,26848,6,9),(10,2019,'1',18,27771,7,10),(11,2019,'1',18,28341,6,11),(12,2019,'1',18,31233,2,12),(13,2019,'1',18,31917,5,13),(14,2019,'1',19,1,8,2),(15,2019,'1',19,10736,9,14),(16,2019,'1',19,19595,10,15),(17,2019,'1',19,23009,11,16),(18,2019,'1',19,23887,11,17),(19,2019,'1',19,24685,9,18),(20,2019,'1',19,31233,12,19),(21,2019,'1',19,31444,13,7),(22,2019,'1',19,32158,14,20),(23,2019,'1',20,1,15,20),(24,2019,'1',20,25283,3,8),(25,2019,'1',20,28579,16,12),(26,2019,'1',20,28883,14,4),(27,2019,'1',20,28883,14,5),(28,2019,'1',20,28955,16,7),(29,2019,'1',20,30428,17,1),(30,2019,'1',20,30428,17,11),(31,2019,'1',20,30657,18,13),(32,2019,'1',20,31412,13,10),(33,2019,'1',21,1,19,12),(34,2019,'1',21,1,20,20),(35,2019,'1',21,23009,21,19),(36,2019,'1',21,25968,22,21),(37,2019,'1',21,25968,23,11),(38,2019,'1',21,30561,24,22),(39,2019,'1',21,31233,25,2),(40,2019,'1',21,31403,26,23),(41,2019,'1',21,31412,27,24),(42,2019,'1',21,32598,28,15),(43,2019,'1',21,33302,29,25),(44,2019,'1',21,33369,30,10),(45,2019,'1',22,1,31,26),(46,2019,'1',22,23006,31,19),(47,2019,'1',22,23883,24,15),(48,2019,'1',22,24468,32,27),(49,2019,'1',22,24491,33,16),(50,2019,'1',22,25415,34,28),(51,2019,'1',22,25952,34,29),(52,2019,'1',22,27888,35,17),(53,2019,'1',22,28660,35,30),(54,2019,'1',22,30419,33,31),(55,2019,'1',22,31442,36,9),(56,2019,'1',24,1,37,32),(57,2019,'1',24,29383,38,33),(58,2019,'1',24,29383,38,31),(59,2019,'1',24,30411,39,19),(60,2019,'1',24,30411,38,34),(61,2019,'1',24,30547,40,15),(62,2019,'1',24,31082,41,22),(63,2019,'1',24,31442,42,8),(64,2019,'1',24,32129,43,30),(65,2019,'1',24,32985,44,2),(66,2019,'1',40,1,45,10),(67,2019,'1',40,26837,46,19),(68,2019,'1',40,30729,47,35),(69,2019,'1',40,30729,48,36),(70,2019,'1',40,31234,49,33),(71,2019,'1',40,31234,50,24),(72,2019,'1',40,33508,51,21),(73,2019,'1',41,1,28,30),(74,2019,'1',41,1,52,36),(75,2019,'1',41,1,53,8),(76,2019,'1',41,28579,25,1),(77,2019,'1',41,29024,31,17),(78,2019,'1',41,31444,27,16),(79,2019,'1',41,32212,54,6),(80,2019,'1',41,33111,19,5),(81,2019,'1',42,1,21,17),(82,2019,'1',42,20270,55,7),(83,2019,'1',42,21407,32,37),(84,2019,'1',42,23006,31,15),(85,2019,'1',42,26017,35,19),(86,2019,'1',42,26399,34,27),(87,2019,'1',42,28047,11,31),(88,2019,'1',42,28053,56,30),(89,2019,'1',42,30411,57,16),(90,2019,'1',42,30562,58,36),(91,2019,'1',43,24386,59,34),(92,2019,'1',43,24644,60,10),(93,2019,'1',43,24644,45,4),(94,2019,'1',43,31412,61,19),(95,2019,'1',43,31412,62,15),(96,2019,'1',43,32598,63,31),(97,2019,'1',43,32598,12,35),(98,2019,'1',43,32598,64,36),(99,2019,'1',43,32598,54,8),(100,2019,'1',44,1,65,9),(101,2019,'1',44,23550,21,19),(102,2019,'1',44,25573,66,6),(103,2019,'1',44,31423,67,38),(104,2019,'1',44,31423,68,8),(105,2019,'1',44,31442,66,2),(106,2019,'1',36,5594,69,15),(107,2019,'1',36,5594,70,33),(108,2019,'1',36,9801,70,36),(109,2019,'1',36,26837,71,30),(110,2019,'1',36,31102,72,31),(111,2019,'1',36,31102,72,35),(112,2019,'1',37,1,46,26),(113,2019,'1',37,5594,73,35),(114,2019,'1',37,26837,46,22),(115,2019,'1',37,30661,74,24),(116,2019,'1',37,31442,75,15),(117,2019,'1',37,33278,76,30),(118,2019,'1',38,1,77,7),(119,2019,'1',38,1,77,2),(120,2019,'1',38,25573,77,9),(121,2019,'1',38,30411,78,30),(122,2019,'1',38,30509,40,34),(123,2019,'1',38,30547,79,16),(124,2019,'1',38,30547,80,12),(125,2019,'1',38,31082,41,31),(126,2019,'1',38,31442,81,1),(127,2019,'1',38,31442,78,36),(128,2019,'1',38,32129,78,15),(129,2019,'1',38,32985,82,5),(130,2019,'1',39,1,72,19),(131,2019,'1',39,23025,83,10),(132,2019,'1',39,23025,72,4),(133,2019,'1',39,23025,83,9),(134,2019,'1',39,23025,84,13),(135,2019,'1',39,23025,83,11),(136,2019,'1',39,30419,85,2),(137,2019,'1',39,30419,71,36),(138,2019,'1',39,30419,79,26),(139,2019,'1',39,31102,72,24),(140,2019,'1',1,24645,86,9),(141,2019,'1',1,25988,28,26),(142,2019,'1',1,25988,69,34),(143,2019,'1',1,27460,87,22),(144,2019,'1',1,27665,68,2),(145,2019,'1',1,29384,88,10),(146,2019,'1',2,13869,89,6),(147,2019,'1',2,13869,90,9),(148,2019,'1',2,24645,86,7),(149,2019,'1',2,27771,7,12),(150,2019,'1',2,30937,49,36),(151,2019,'1',2,30937,91,26),(152,2019,'1',3,9404,89,9),(153,2019,'1',3,9404,92,1),(154,2019,'1',3,9404,89,12),(155,2019,'1',3,9404,89,13),(156,2019,'1',3,9404,89,20),(157,2019,'1',3,9404,92,8),(158,2019,'1',3,23972,93,10),(159,2019,'1',3,23972,93,4),(160,2019,'1',3,33508,51,39),(161,2019,'1',4,1,35,19),(162,2019,'1',4,21407,32,27),(163,2019,'1',4,22904,31,35),(164,2019,'1',4,23107,52,33),(165,2019,'1',4,23840,35,16),(166,2019,'1',4,23889,35,31),(167,2019,'1',4,24386,34,28),(168,2019,'1',4,24386,34,37),(169,2019,'1',4,24411,52,36),(170,2019,'1',4,27758,31,30),(171,2019,'1',4,31919,31,15),(172,2019,'1',4,34199,34,21),(173,2019,'1',5,21723,34,18),(174,2019,'1',5,22277,35,22),(175,2019,'1',5,22798,34,40),(176,2019,'1',5,23625,58,16),(177,2019,'1',5,23887,52,36),(178,2019,'1',5,24411,35,17),(179,2019,'1',5,24678,68,9),(180,2019,'1',5,28052,56,32),(181,2019,'1',5,33883,55,5),(182,2019,'1',6,1,52,26),(183,2019,'1',6,19789,11,15),(184,2019,'1',6,21564,52,30),(185,2019,'1',6,23107,58,16),(186,2019,'1',6,25585,94,11),(187,2019,'1',6,28071,51,14),(188,2019,'1',6,30657,18,2),(189,2019,'1',6,30957,95,19),(190,2019,'1',6,31002,96,12),(191,2019,'1',6,31002,97,13),(192,2019,'1',6,31423,23,1),(193,2019,'1',7,1,11,32),(194,2019,'1',7,22282,11,15),(195,2019,'1',7,23769,98,35),(196,2019,'1',7,23769,98,36),(197,2019,'1',7,28579,99,18),(198,2019,'1',7,29256,98,16),(199,2019,'1',7,29256,98,30),(200,2019,'1',7,31102,25,8),(201,2019,'1',7,31104,100,9),(202,2019,'1',7,31233,25,1),(203,2019,'1',7,31423,99,41),(204,2019,'1',8,1,51,40),(205,2019,'1',8,21549,101,38),(206,2019,'1',8,21561,34,28),(207,2019,'1',8,23828,31,32),(208,2019,'1',8,23834,32,37),(209,2019,'1',8,24212,35,15),(210,2019,'1',8,27888,56,19),(211,2019,'1',8,28052,52,31),(212,2019,'1',8,29479,67,39),(213,2019,'1',8,30332,24,33),(214,2019,'1',9,1,67,40),(215,2019,'1',9,22904,31,36),(216,2019,'1',9,23548,52,17),(217,2019,'1',9,24411,35,32),(218,2019,'1',9,26815,101,37),(219,2019,'1',9,26837,46,16),(220,2019,'1',9,27522,56,35),(221,2019,'1',9,27888,24,31),(222,2019,'1',9,28053,56,19),(223,2019,'1',9,28230,101,42),(224,2019,'1',9,30561,24,33),(225,2019,'1',10,1,102,41),(226,2019,'1',10,1,102,38),(227,2019,'1',10,22933,55,2),(228,2019,'1',10,23550,21,22),(229,2019,'1',10,23883,58,30),(230,2019,'1',10,28047,21,32),(231,2019,'1',10,28071,51,42),(232,2019,'1',10,30562,58,17),(233,2019,'1',10,31002,103,9),(234,2019,'1',10,31510,14,10),(235,2019,'1',10,32158,14,11),(236,2019,'1',10,33883,55,1),(237,2019,'1',11,1,104,21),(238,2019,'1',11,24468,32,38),(239,2019,'1',11,27973,104,14),(240,2019,'1',11,29024,31,24),(241,2019,'1',11,30427,105,43),(242,2019,'1',11,30427,29,44),(243,2019,'1',11,30779,106,42),(244,2019,'1',11,30779,106,39),(245,2019,'1',11,31596,107,45),(246,2019,'1',11,33278,107,46),(247,2019,'1',11,33302,105,47),(248,2019,'1',12,1,108,19),(249,2019,'1',12,24644,109,13),(250,2019,'1',12,24644,109,11),(251,2019,'1',12,24644,110,2),(252,2019,'1',12,30657,18,6),(253,2019,'1',12,30657,18,9),(254,2019,'1',12,31423,67,48),(255,2019,'1',12,31423,23,4),(256,2019,'1',12,32985,111,49),(257,2019,'1',13,1,112,50),(258,2019,'1',13,1,113,51),(259,2019,'1',13,1,113,52),(260,2019,'1',13,1,114,53),(261,2019,'1',13,1,115,54),(262,2019,'1',13,1,113,55),(263,2019,'1',13,1,116,56),(264,2019,'1',13,1,113,57),(265,2019,'1',13,25963,117,58),(266,2019,'1',13,26848,113,59),(267,2019,'1',13,28341,118,60),(268,2019,'1',13,33508,113,61),(269,2019,'1',14,24491,119,62),(270,2019,'1',14,25585,120,63),(271,2019,'1',14,25585,121,64),(272,2019,'1',14,29256,122,65),(273,2019,'1',14,30779,123,66),(274,2019,'1',14,31596,113,67),(275,2019,'1',14,33121,113,68),(276,2019,'1',14,33125,113,69),(277,2019,'1',15,1,102,18),(278,2019,'1',15,1,11,36),(279,2019,'1',15,24393,68,7),(280,2019,'1',15,24393,99,48),(281,2019,'1',15,24678,22,23),(282,2019,'1',15,29504,58,19),(283,2019,'1',15,31412,124,12),(284,2019,'1',15,31412,13,13),(285,2019,'1',15,33125,15,9),(286,2019,'1',15,34080,100,2),(287,2019,'1',17,17710,125,53),(288,2019,'1',17,27521,112,70),(289,2019,'1',17,30937,126,71),(290,2019,'1',17,31510,127,63),(291,2019,'1',26,16462,7,4),(292,2019,'1',26,16462,128,5),(293,2019,'1',26,28579,128,20),(294,2019,'1',26,30481,129,7),(295,2019,'1',26,31580,130,17),(296,2019,'1',26,31580,131,31),(297,2019,'1',26,31580,86,2),(298,2019,'1',26,31596,132,33),(299,2019,'1',27,8388,133,30),(300,2019,'1',27,24644,22,41),(301,2019,'1',27,24644,110,6),(302,2019,'1',27,27521,109,9),(303,2019,'1',27,27521,60,11),(304,2019,'1',27,31102,133,17),(305,2019,'1',27,32158,14,12),(306,2019,'1',28,9801,134,10),(307,2019,'1',28,21953,55,13),(308,2019,'1',28,23313,34,40),(309,2019,'1',28,23313,34,29),(310,2019,'1',28,26017,35,30),(311,2019,'1',28,27448,32,27),(312,2019,'1',28,27522,58,36),(313,2019,'1',28,28099,35,35),(314,2019,'1',28,29504,58,15),(315,2019,'1',28,31584,55,7),(316,2019,'1',29,19694,34,42),(317,2019,'1',29,23107,52,30),(318,2019,'1',29,30019,55,2),(319,2019,'1',29,30481,129,11),(320,2019,'1',29,33832,55,1),(321,2019,'1',29,33883,55,10),(322,2019,'1',29,33883,55,13),(323,2019,'1',31,17710,135,10),(324,2019,'1',31,24308,136,5),(325,2019,'1',31,24308,135,6),(326,2019,'1',31,30411,137,22),(327,2019,'1',31,30657,135,11),(328,2019,'1',31,30657,135,20),(329,2019,'1',31,30661,138,30);
/*!40000 ALTER TABLE `thorarios` ENABLE KEYS */;
UNLOCK TABLES;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = cp850 */ ;
/*!50003 SET character_set_results = cp850 */ ;
/*!50003 SET collation_connection  = cp850_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`localhost`*/ /*!50003 TRIGGER `tg_horario_ciclo_BI` BEFORE INSERT ON `thorarios` FOR EACH ROW BEGIN
	CALL CHK_horario_ciclo(new.ciclo);

	IF EXISTS(SELECT * FROM sistema_llaves.thorarios as th WHERE th.year=NEW.year AND th.ciclo=NEW.ciclo AND th.num_aula=NEW.num_aula AND th.num_emp_maestro=NEW.num_emp_maestro AND th.id_materia=NEW.id_materia AND th.id_dias_horas=NEW.id_dias_horas) THEN
		SIGNAL SQLSTATE '46011'
		SET MESSAGE_TEXT='Ya hay un horario con estas caracteristicas';
	END IF;
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;

--
-- Table structure for table `thoras`
--

DROP TABLE IF EXISTS `thoras`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
 SET character_set_client = utf8mb4 ;
CREATE TABLE `thoras` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `hora_inicio` time NOT NULL,
  `hora_fin` time NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=29 DEFAULT CHARSET=utf8 COLLATE=utf8_general_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `thoras`
--

LOCK TABLES `thoras` WRITE;
/*!40000 ALTER TABLE `thoras` DISABLE KEYS */;
INSERT INTO `thoras` VALUES (1,'13:00:00','14:00:00'),(2,'17:00:00','18:00:00'),(3,'20:00:00','21:00:00'),(4,'09:00:00','10:00:00'),(5,'10:00:00','11:00:00'),(6,'11:00:00','12:00:00'),(7,'07:00:00','08:00:00'),(8,'19:00:00','20:00:00'),(9,'12:00:00','13:00:00'),(10,'08:00:00','09:00:00'),(11,'16:00:00','17:00:00'),(12,'14:00:00','15:00:00'),(13,'15:00:00','16:00:00'),(14,'18:00:00','19:00:00'),(15,'09:00:00','11:00:00'),(16,'18:00:00','21:00:00'),(17,'07:00:00','10:00:00'),(18,'10:00:00','13:00:00'),(19,'16:00:00','19:00:00'),(20,'15:00:00','18:00:00'),(21,'08:00:00','10:00:00'),(22,'11:00:00','15:00:00'),(23,'08:00:00','11:00:00'),(24,'08:00:00','12:00:00'),(25,'16:00:00','18:00:00'),(26,'13:00:00','16:00:00'),(27,'18:00:00','20:00:00'),(28,'20:00:00','22:00:00');
/*!40000 ALTER TABLE `thoras` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `tllaves`
--

DROP TABLE IF EXISTS `tllaves`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
 SET character_set_client = utf8mb4 ;
CREATE TABLE `tllaves` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `codigo` bigint(20) NOT NULL,
  `id_aula` int(11) NOT NULL,
  `ref` int(11) DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `codigo` (`codigo`),
  KEY `FK_tllaves_taulas` (`id_aula`),
  CONSTRAINT `FK_tllaves_taulas` FOREIGN KEY (`id_aula`) REFERENCES `taulas` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=89 DEFAULT CHARSET=utf8 COLLATE=utf8_general_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `tllaves`
--

LOCK TABLES `tllaves` WRITE;
/*!40000 ALTER TABLE `tllaves` DISABLE KEYS */;
INSERT INTO `tllaves` VALUES (1,8596785191,1,NULL),(2,8540100001,1,NULL),(3,8510200002,2,NULL),(4,8540100002,2,NULL),(5,8520100003,3,NULL),(6,8540100003,3,NULL),(7,8520200004,4,NULL),(8,8540100004,4,NULL),(9,8596785216,5,NULL),(10,8540100005,5,NULL),(11,64478179571,6,NULL),(12,8540100006,6,NULL),(13,8596783803,7,NULL),(14,8540100007,7,NULL),(15,8530100008,8,NULL),(16,8540100008,8,NULL),(17,8596783864,9,NULL),(18,8540100009,9,NULL),(19,8596785139,10,NULL),(20,8540100010,10,NULL),(21,8605678482,11,NULL),(22,8540100011,11,NULL),(23,64477293017,12,NULL),(24,8540100012,12,NULL),(25,8520100013,13,NULL),(26,8540100013,13,NULL),(27,8520200014,14,NULL),(28,8540100014,14,NULL),(29,8520300015,15,NULL),(30,8540100015,15,NULL),(31,8520500016,16,NULL),(32,8540100016,16,NULL),(33,8520600017,17,NULL),(34,8540100017,17,NULL),(35,8510100018,18,NULL),(36,8540100018,18,NULL),(37,8601375123,19,NULL),(38,8540100019,19,NULL),(39,64473748589,20,NULL),(40,8540100020,20,NULL),(41,8520200021,21,NULL),(42,8540100021,21,NULL),(43,8520300022,22,NULL),(44,8540100022,22,NULL),(45,64477287912,23,NULL),(46,8540100023,23,NULL),(47,8520500024,24,NULL),(48,8540100024,24,NULL),(49,64477293384,25,NULL),(50,8540100026,25,NULL),(51,8530200027,26,NULL),(52,8540100027,26,NULL),(53,8530300028,27,NULL),(54,8540100028,27,NULL),(55,8530400029,28,NULL),(56,8540100029,28,NULL),(57,8530500030,29,NULL),(58,8540100030,29,NULL),(59,274892000000,30,NULL),(60,8540100031,30,NULL),(61,8510100032,31,NULL),(62,8540100032,31,NULL),(63,8605144239,32,NULL),(64,8540100033,32,NULL),(65,8601357496,33,NULL),(66,8540100034,33,NULL),(67,8520100035,34,NULL),(68,8540100035,34,NULL),(69,8605666756,35,NULL),(70,8540100036,35,NULL),(71,8520200037,36,NULL),(72,8540100037,36,NULL),(73,8520300038,37,NULL),(74,8540100038,37,NULL),(75,8605671302,38,NULL),(76,8540100039,38,NULL),(77,8530100040,39,NULL),(78,8540100040,39,NULL),(79,8530200041,40,NULL),(80,8540100041,40,NULL),(81,8530300042,41,NULL),(82,8540100042,41,NULL),(83,8530400043,42,NULL),(84,8540100043,42,NULL),(85,8605672145,43,NULL),(86,8540100044,43,NULL),(87,8512000045,44,NULL),(88,8540100045,44,NULL);
/*!40000 ALTER TABLE `tllaves` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `tmaestros`
--

DROP TABLE IF EXISTS `tmaestros`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
 SET character_set_client = utf8mb4 ;
CREATE TABLE `tmaestros` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `num_emp` int(11) DEFAULT NULL,
  `nombre` varchar(70) DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `num_emp` (`num_emp`)
) ENGINE=InnoDB AUTO_INCREMENT=143 DEFAULT CHARSET=utf8 COLLATE=utf8_general_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `tmaestros`
--

LOCK TABLES `tmaestros` WRITE;
/*!40000 ALTER TABLE `tmaestros` DISABLE KEYS */;
INSERT INTO `tmaestros` VALUES (1,1,'SIN ASIGNAR...'),(2,21402,'NAVARRETE HINOJOSA MARIA DE LOS ANGELES'),(3,25960,'ORTIZ ESTARDANTE ALFREDO'),(4,26848,'MUNGUIA VEGA NORA ELBA'),(5,27771,'ALVARADO RUIZ JOSE MAGDALENO'),(6,28341,'ESQUER PERALTA JAVIER'),(7,31233,'GRANILLO CONTRERAS JESUS ERIBERTO'),(8,31917,'DEL RINCON JURADO TERESITA'),(9,10736,'GASPAR ARMENTA JORGE ALBERTO'),(10,19595,'TIBURCIO MUNIVE GUILLERMO DEL CARMEN'),(11,23009,'RUVALCABA CORNEJO CARLOS'),(12,23887,'CAUDANA CAMACHO GERMAN'),(13,24685,'PEDROZA MONTERO MARTIN RAFAEL'),(14,31444,'PITALUA DIAZ NUN'),(15,32158,'ACOSTA CAPERON GERARDO'),(16,25283,'CORDOVA SUAREZ ALBERTO'),(17,28579,'PEDROZA MONTERO FRANCISCA'),(18,28883,'VALENZUELA VALENZUELA ALEJANDRO'),(19,28955,'ROMO AYALA MARIA MAGDALENA'),(20,30428,'PRECIADO RODRIGUEZ JUAN MARTIN'),(21,30657,'RAMOS TORRES ISIDRO'),(22,31412,'OZUNA HUERTA GUSTAVO JESUS'),(23,25968,'MORA CASTELLANOS CONSUELO'),(24,30561,'CARRENO MONTOYA MARIA ESMERALDA'),(25,31403,'INIGUEZ PALOMARES RAMON ALFONSO'),(26,32598,'MENDEZ ANTONIO BALDEMAR'),(27,33302,'PEREZ ENCISO RICARDO ARTURO'),(28,33369,'LEAL SOTO VIRIDIANA'),(29,23006,'CERVANTES SANCHEZ BENITO ROBERTO'),(30,23883,'SANTANA ROJAS VITALIANO'),(31,24468,'MARTINEZ URENA ALVARO'),(32,24491,'BARCELO VALENZUELA MARIO'),(33,25415,'GARIBAY ESCOBAR SERGIO'),(34,25952,'TANORI ANAYA MARTHA ICELA'),(35,27888,'ZEPEDA MILANEZ CLAUDIA ANGELICA'),(36,28660,'FELIX MENDIVIL ELIZABETH'),(37,30419,'MEZA IBARRA IVAN DOSTOYEWSKI'),(38,31442,'VALENZUELA FIGUEROA ALVARO ALFONSO'),(39,29383,'NAVARRO HERNANDEZ RENE FRANCISCO'),(40,30411,'ROMERO AGUILAR JORGE FRANCO'),(41,30547,'CIRETT GALAN FEDERICO MIGUEL'),(42,31082,'LOPEZ MUNOZ MIGUEL ENRIQUE'),(43,32129,'OCHOA HERNANDEZ JOSE LUIS'),(44,32985,'TORRES PERALTA RAQUEL'),(45,26837,'SAPIEN CHAVEZ VICTOR HUGO'),(46,30729,'GARCIA GARCIA LUIS FERNANDO'),(47,31234,'CRUZ VALENCIA ELBA HORTENSIA'),(48,33508,'GUZMAN GRIJALVA HECTOR MANUEL'),(49,29024,'GRIJALVA CASTILLO SERGIO'),(50,32212,'LOPEZ VIERA VICTOR HUGO'),(51,33111,'RAMOS CARRAZCO ANTONIO'),(52,20270,'VARGAS LOPEZ JUAN MANUEL'),(53,21407,'FLORES SANCHEZ OMRI'),(54,26017,'LEYVA CONTRERAS RENE CESAR'),(55,26399,'PADILLA VALDIVIA LUIS ARTURO'),(56,28047,'DORAME VELASQUEZ MAXIMINO'),(57,28053,'RIVERA FLORES MARIA DE JESUS'),(58,30562,'PALAFOX DUARTE MARTHA CECILIA'),(59,24386,'MALDONADO CASTRO JESUS'),(60,24644,'SOTO RUIZ MIGUEL DANIEL'),(61,23550,'AYALA JOSE DE JESUS'),(62,25573,'SANCHEZ SCHMITZ GUZMAN GERARDO ALFONSO'),(63,31423,'MARTINEZ MONTANO RAYMUNDO'),(64,5594,'ANAYA EREDIAS CARLOS'),(65,9801,'FIGUEROA NAVARRO CARLOS'),(66,31102,'SORTILLON GONZALEZ PATRICIA EUGENIA'),(67,30661,'HERRERA JIMENEZ VICTOR MANUEL'),(68,33278,'ROMO GARCIA FRANK'),(69,30509,'VALENZUELA LOPEZ LEV DAVID'),(70,23025,'OROZCO DUENAS FRANCISCO ALBERTO'),(71,24645,'LEON LARA JUAN DE DIOS'),(72,25988,'MAYTORENA RICO JESUS MANUEL'),(73,27460,'YOCUPICIO CASTRO CARLOS ARMANDO'),(74,27665,'AGUAYO SALINAS MIRNA ELIA'),(75,29384,'ANAYA PEREZ MARIA ELENA'),(76,13869,'MARTINEZ CASTRO JOSE LUIS'),(77,30937,'DURAND VILLALOBOS RENE ROGELIO'),(78,9404,'ESQUER ROSAS RODRIGO'),(79,23972,'PLATT BORBON MARTINA ELISA'),(80,22904,'DOMINGUEZ SILVA RUBEN ARMANDO'),(81,23107,'IBARRA SAGASTA PABLO'),(82,23840,'JIMENEZ RODRIGUEZ JOSE RAMON'),(83,23889,'FLORES SOTO BLANCA EVELIA'),(84,24411,'FIGUEROA GALINDO REYNALDO'),(85,27758,'SOTO PUEBLA DIEGO'),(86,31919,'GOMEZ COLIN MARIA DEL ROCIO'),(87,34199,'GARZA AGUIRRE FABIAN ALFREDO'),(88,21723,'RENTERIA GUTIERREZ FIDENCIO'),(89,22277,'GRIJALVA MONTEVERDE AGUSTIN'),(90,22798,'SILVA ESPEJO ESTEBAN'),(91,23625,'MANOSALVAS LEYVA MARTIN DE JESUS'),(92,24678,'DAVILA RASCON YNA MARIA'),(93,28052,'RIVERA MARTINEZ HERMENEGILDO'),(94,33883,'GARCIA VALENZUELA JORGE ALBERTO'),(95,19789,'BACA RAMIREZ ABEL'),(96,21564,'LOPEZ BORBON JOAQUIN HUMBERTO'),(97,25585,'PEREZ SOLTERO ALONSO'),(98,28071,'MONGE AMAYA FRANCISCA'),(99,30957,'MENDIVIL REYNOSO TEMISTOCLES'),(100,31002,'COTA REMBAU ALEX IVAN'),(101,22282,'CARRILLO NAVARRO FRANCISCO ARMANDO'),(102,23769,'CHAVEZ MORALES MARTIN'),(103,29256,'OLEA MIRANDA JAIME'),(104,31104,'JUAREZ SANCHEZ JOSE OCTAVIO'),(105,21549,'CRUZ LARIOS JAIME'),(106,21561,'IBARRA CARMELO JESUS IGNACIO'),(107,23828,'RODRIGUEZ JAUREGUI EZEQUIEL'),(108,23834,'AMAVIZCA RASCON RANULFO'),(109,24212,'DORAME AGUILAR MARCELINO'),(110,29479,'MENDOZA ARREOLA LUIS ARMANDO'),(111,30332,'LEAL SOTO DALICIA ANGELES'),(112,23548,'CONTRERAS ESTRADA ISRAEL'),(113,26815,'QUIROZ CINCO MARIA'),(114,27522,'CALDERON AYALA GERARDO'),(115,28230,'GONZALEZ AGUILAR RAUL REMIGIO'),(116,22933,'OROZCO GARCIA MARIA ESTHER'),(117,31510,'PARADA RUIZ ELSY GUADALUPE'),(118,27973,'CASTILLO CARRILLO RAUL VICENTE'),(119,30427,'PORCHAS OROZCO MIGUEL'),(120,30779,'PACHECO RAMIREZ JESUS HORACIO'),(121,31596,'BENITEZ BALTAZAR VICTOR HUGO'),(122,25963,'VELAZQUEZ CONTRERAS LUIS EDUARDO'),(123,33121,'VALENZUELA GALVAN MARGARITA'),(124,33125,'BRAU AVILA AGUSTIN'),(125,24393,'MONTANO VALLE FELIX'),(126,29504,'MORALES GONZALEZ MYRIAM VIRGINIA'),(127,34080,'LOPEZ SAIZ CARMEN MARIA'),(128,17710,'ROMERO DESSENS LUIS FELIPE'),(129,27521,'LEON DUARTE JAIME ALFONSO'),(130,16462,'PEREZ RAMIREZ SERGIO FRANCISCO'),(131,30481,'ICEDO ZAMORA TATLIANA MERCEDES'),(132,31580,'FIGUEROA MARTINEZ DIANA'),(133,8388,'CUAMEA CRUZ GUILLERMO'),(134,21953,'CRUZ VAZQUEZ CATALINA'),(135,23313,'AVENDANO ENCISO ALIPIA'),(136,27448,'VALENZUELA JACOBO LUIS ALBERTO'),(137,28099,'FIERROS BOBADILLA JORGE USBALDO'),(138,31584,'DE LEON FLORES ANED'),(139,19694,'TORRES RAMIREZ JOSUE'),(140,30019,'QUIHUI COTA LUIS'),(141,33832,'FERNANDEZ QUIROZ JESUS DANIEL'),(142,24308,'TORRES VALVERDE GUADALUPE ARACELI');
/*!40000 ALTER TABLE `tmaestros` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `tmaterias`
--

DROP TABLE IF EXISTS `tmaterias`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
 SET character_set_client = utf8mb4 ;
CREATE TABLE `tmaterias` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `nombre` varchar(150) DEFAULT NULL,
  `programa` varchar(100) DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=139 DEFAULT CHARSET=utf8 COLLATE=utf8_general_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `tmaterias`
--

LOCK TABLES `tmaterias` WRITE;
/*!40000 ALTER TABLE `tmaterias` DISABLE KEYS */;
INSERT INTO `tmaterias` VALUES (1,'EVALUACION DE PROYECTOS','IIS'),(2,'SISTEMAS DE PRODUCCION','IIS'),(3,'INGENIERIA ECONOMICA','IIS'),(4,'PLANEACION Y CONTROL INDUSTRIAL','ISI'),(5,'ASPECTOS LEGALES EN LA ORGANIZACION','IIS'),(6,'PRODUCCION MAS LIMPIA','IIS'),(7,'GESTION DE MANTENIMIENTO','IME'),(8,'CONTROLADORES LOGICOS PROGRAMABLES','IME'),(9,'ELECTROMAGNETISMO','IME'),(10,'CIENCIA DE LOS MATERIALES','IME'),(11,'ECUACIONES DIFERENCIALES I','IME'),(12,'RESISTENCIA DE MATERIALES','IME'),(13,'ELECTRONICA INDUSTRIAL','IME'),(14,'COSTOS EN INGENIERIA','IME'),(15,'INSTRUMENTACION Y METROLOGIA','IIS'),(16,'ERGONOMIA','IIS'),(17,'DISENO DE EXPERIMENTOS','IIS'),(18,'INGENIERIA DE SISTEMAS','IIS'),(19,'ELECTRONICA ANALOGICA','IME'),(20,'INGENIERIA DE CONTROL I','IME'),(21,'CALCULO DIFERENCIAL E INTEGRAL III','IME'),(22,'CULTURA EMPRENDEDORA','IIS'),(23,'MEJORA DE LA CALIDAD','IIS'),(24,'ALGEBRA','IME'),(25,'PROCESOS DE MANUFACTURA I','IME'),(26,'FLUIDOS Y CALOR','IME'),(27,'MAQUINAS ELECTRICAS','IME'),(28,'MECANICA VECTORIAL PARA INGENIEROS I','IME'),(29,'CERTIF. DE FESTO, DAN10-DIPLOMADO EN AUTOMATIZACION IND. CON NEUMATICA','IME'),(30,'METROLOGIA Y NORMALIZACION','IME'),(31,'FISICA I CON LABORATORIO','ISI'),(32,'ETICA Y DESARROLLO PROFESIONAL',''),(33,'FUNDAMENTOS DE COMPUTACION II','ISI'),(34,'CARACTERISTICAS DE LA SOCIEDAD ACTUAL',''),(35,'CALCULO DIFERENCIAL E INTEGRAL II','ISI'),(36,'INTRODUCCION A LA INGENIERIA EN SISTEMAS DE INFORMACION','ISI'),(37,'DESARROLLO DE SISTEMAS I','ISI'),(38,'BASES DE DATOS I','ISI'),(39,'PROGRAMACION VISUAL Y EN INTERNET','ISI'),(40,'DESARROLLO DE SISTEMAS III','ISI'),(41,'COMUNICACION DE DATOS I','ISI'),(42,'SISTEMAS DE INFORMACION BASADOS EN WEB','ISI'),(43,'ANALISIS Y DISENO DE SISTEMAS DE INFORMACION','ISI'),(44,'INTELIGENCIA ARTIFICIAL','ISI'),(45,'CONTROL DE CALIDAD','IIS'),(46,'PROGRAMACION PARA INGENIEROS I','IIS'),(47,'PROGRAMACION CAD/CAM','IIS'),(48,'SUPERVISION DE PRODUCCION','IIS'),(49,'REINGENIERIA (BRP)','IIS'),(50,'SISTEMAS DE CALIDAD','IIS'),(51,'SUSTENTABILIDAD EN LAS INGENIERIAS','IIS'),(52,'GEOMETRIA ANALITICA','IME'),(53,'ELECTRONICA DIGITAL','IME'),(54,'MAQUINAS HIDRAULICAS','IME'),(55,'QUIMICA I','ISI'),(56,'CALCULO DIFERENCIAL E INTEGRAL I','ISI'),(57,'FUNDAMENTOS DE COMPUTACION I','ISI'),(58,'PROBABILIDAD Y ESTADISTICA','ISI'),(59,'MACROECONOMIA','IIS'),(60,'INVESTIGACION DE OPERACIONES II','IIS'),(61,'ELEMENTOS DE AUTOMATIZACION','IIS'),(62,'ROBOTICA','IIS'),(63,'DISENO CINEMATICO DE ELEMENTOS DE MAQUINAS','IME'),(64,'DISENO DE ELEMENTOS MECANICOS','IME'),(65,'INGENIERIA DE SOFTWARE','ISI'),(66,'INGENIERIA DE SISTEMAS DE INFORMACION','ISI'),(67,'COMUNICACION EN INGENIERIA','ISI'),(68,'ADMINISTRACION ESTRATEGICA','IIS'),(69,'MECANICA VECTORIAL PARA INGENIEROS II','IME'),(70,'ANALISIS NUMERICO Y PROGRAMACION','IME'),(71,'PROGRAMACION PARA INGENIEROS II','IIS'),(72,'DIBUJO INDUSTRIAL','IIS'),(73,'PROCESAMIENTO DIGITAL DE SENALES','IME'),(74,'DIBUJO INDUSTRIAL II','IME'),(75,'SISTEMAS DE INFORMACION','ISI'),(76,'REDES DE DATOS Y APLICACIONES EN INTERNET','IME'),(77,'SERVIDORES I','ISI'),(78,'DESARROLLO DE SISTEMAS II','ISI'),(79,'FUNDAMENTOS DE COMPUTACION III','ISI'),(80,'INTRODUCCION AL SOFTWARE DE BASE','ISI'),(81,'TOPICOS ESPECIALES DE BASES DE DATOS','ISI'),(82,'MINERIA DE DATOS','ISI'),(83,'DIBUJO MECANICO','IME'),(84,'DIBUJO INDUSTRIAL I','IME'),(85,'REDES II','ISI'),(86,'ANALISIS Y DISENO DE SISTEMAS','IIS'),(87,'PRESUPUESTACION Y COSTEO EN SERVICIOS','IIS'),(88,'INTRODUCCION A LA INGENIERIA MECATRONICA','IME'),(89,'GESTION DEL RECURSO HUMANO','IIS'),(90,'ELECTIVA DE SOCIALES O HUMANIDADES','ISI'),(91,'MANUFACTURA AUTOMOTRIZ','IIS'),(92,'COMPORTAMIENTO ORGANIZACIONAL','IIS'),(93,'INTRODUCCION A LA INGENIERIA INDUSTRIAL Y DE SISTEMAS','IIS'),(94,'ELECTIVA DEPARTAMENTO ECONOMIA','ISI'),(95,'TOPICOS DE ELECTRICIDAD Y ELECTRONICA','ISI'),(96,'SOLUCIONES INTEGRALES EN LAS EMPRESAS','ISI'),(97,'SISTEMAS DE SOPORTE A LA TOMA DE DECISIONES','ISI'),(98,'ANALISIS DE DATOS EN INGENIERIA','IIS'),(99,'INGENIERIA DE METODOS','IIS'),(100,'TERMODINAMICA','IIS'),(101,'ESTRATEGIAS PARA APRENDER A APRENDER',''),(102,'FLUIDOS Y ELECTROMAGNETISMO','IIS'),(103,'PLANEACION ESTRATEGICA INFORMATICA','ISI'),(104,'CONTROL DE MAQUINAS ELECTRICAS','IME'),(105,'CERTIF. DE FESTO, DAN20-DIPLOMADO EN AUTOMATIZACION IND. CON HIDRAULICA','IME'),(106,'INSTRUMENTACION VIRTUAL','IME'),(107,'MICROCONTROLADORES','IME'),(108,'TOPICOS DE PRODUCCION Y CALIDAD','IME'),(109,'INVESTIGACION DE OPERACIONES I','ISI'),(110,'PLANEACION INDUSTRIAL','IIS'),(111,'INVESTIGACION ELECTRONICA DE TEMAS SELECTOS','ISI'),(112,'SEMINARIO II','EDS'),(113,'SIN ASIGNAR...',''),(114,'ECONOMIA EN EL DESARROLLO SUSTENTABLE','EDS'),(115,'PRACTS.DE LABORATORIO O DE CAMPO I','EDS'),(116,'SEMINARIO I','EDS'),(117,'REINGENIERIA EN EL DESARROLLO SUSTENTABLE','EDS'),(118,'PRACTS.DE LABORATORIO O DE CAMPO II','EDS'),(119,'SEMINARIO IV','IST'),(120,'INVESTIGACION APLICADA II','IST'),(121,'INVESTIGACION APLICADA I','IST'),(122,'CONTROL DE LA CALIDAD','IST'),(123,'AUTOMATIZACION INDUSTRIAL','IST'),(124,'CIRCUITOS ELECTRICOS','IIS'),(125,'TECNOLOGIA DE ALMACENES','IST'),(126,'FUNDAMENTOS DE LEAN SIX SIGMA','IST'),(127,'COSTOS Y EVALUACION DE PROYECTOS','IST'),(128,'DISENO DE INSTALACIONES','IIS'),(129,'ADMINISTRACION DE PROYECTOS','IME'),(130,'SALUD OCUPACIONAL','IIS'),(131,'GESTION DE LOS SERVICIOS','IIS'),(132,'INSTRUMENTACION VIRTUAL I','IME'),(133,'PLANEACION Y CONTROL DE LA PRODUCCION','IIS'),(134,'DINAMICA DE SISTEMAS','IME'),(135,'SIMULACION DE SISTEMAS','IIS'),(136,'TOPICOS DE MATEMATICAS DISCRETAS','IME'),(137,'GRAFICACION Y MULTIMEDIA','ISI'),(138,'METODO DE ELEMENTO FINITO','IME');
/*!40000 ALTER TABLE `tmaterias` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `tobjetos`
--

DROP TABLE IF EXISTS `tobjetos`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
 SET character_set_client = utf8mb4 ;
CREATE TABLE `tobjetos` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `nombre` varchar(50) DEFAULT NULL,
  `marca` varchar(50) DEFAULT NULL,
  `descripcion` varchar(255) DEFAULT NULL,
  `inventario` int(11) DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=5 DEFAULT CHARSET=utf8 COLLATE=utf8_general_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `tobjetos`
--

LOCK TABLES `tobjetos` WRITE;
/*!40000 ALTER TABLE `tobjetos` DISABLE KEYS */;
INSERT INTO `tobjetos` VALUES (1,'CONTROL-A/C','MIRAGE','CONTROL BLANCO CON ROJO',5),(2,'CONTROL-A/C','YORK','CONTORL BLANCO CON AZUL',5),(3,'CONTROL-CAÃ‘ON','EPSON','CONTROL BLANCO CON BOTONES DE COLORES',5),(4,'BOCINAS','LANIX','COLOR GRIS, CON FUENTE DE PODER',5);
/*!40000 ALTER TABLE `tobjetos` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `tprestamos`
--

DROP TABLE IF EXISTS `tprestamos`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
 SET character_set_client = utf8mb4 ;
CREATE TABLE `tprestamos` (
  `id` int(11) NOT NULL,
  `id_control` int(11) NOT NULL,
  `id_objeto` int(11) NOT NULL,
  `estado` tinyint(1) DEFAULT '0',
  PRIMARY KEY (`id`,`id_control`),
  KEY `FK_tprestamos_tobjetos` (`id_objeto`),
  CONSTRAINT `FK_tprestamos_tobjetos` FOREIGN KEY (`id_objeto`) REFERENCES `tobjetos` (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_general_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `tprestamos`
--

LOCK TABLES `tprestamos` WRITE;
/*!40000 ALTER TABLE `tprestamos` DISABLE KEYS */;
INSERT INTO `tprestamos` VALUES (1,1,2,1),(1,2,4,1),(1,3,1,1),(1,4,3,1);
/*!40000 ALTER TABLE `tprestamos` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `tregistros`
--

DROP TABLE IF EXISTS `tregistros`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
 SET character_set_client = utf8mb4 ;
CREATE TABLE `tregistros` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `id_horario` int(11) DEFAULT NULL,
  `hora_entrada` timestamp NOT NULL,
  `hora_salida` timestamp NULL DEFAULT NULL,
  `id_excepcion` int(11) DEFAULT NULL,
  `id_prestamo` int(11) DEFAULT NULL,
  `id_usuario` int(11) NOT NULL,
  PRIMARY KEY (`id`),
  KEY `FK_tregistros_thorarios` (`id_horario`),
  KEY `FK_tregistros_texcepciones` (`id_excepcion`),
  KEY `FK_tregistros_tprestamos` (`id_prestamo`),
  KEY `FK_tregistros_tusuarios` (`id_usuario`),
  CONSTRAINT `FK_tregistros_texcepciones` FOREIGN KEY (`id_excepcion`) REFERENCES `texcepciones` (`id`),
  CONSTRAINT `FK_tregistros_thorarios` FOREIGN KEY (`id_horario`) REFERENCES `thorarios` (`id`),
  CONSTRAINT `FK_tregistros_tprestamos` FOREIGN KEY (`id_prestamo`) REFERENCES `tprestamos` (`id`),
  CONSTRAINT `FK_tregistros_tusuarios` FOREIGN KEY (`id_usuario`) REFERENCES `tusuarios` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=2 DEFAULT CHARSET=utf8 COLLATE=utf8_general_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `tregistros`
--

LOCK TABLES `tregistros` WRITE;
/*!40000 ALTER TABLE `tregistros` DISABLE KEYS */;
INSERT INTO `tregistros` VALUES (1,27,'2019-04-02 17:02:52','2019-04-02 19:00:32',NULL,1,1);
/*!40000 ALTER TABLE `tregistros` ENABLE KEYS */;
UNLOCK TABLES;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = cp850 */ ;
/*!50003 SET character_set_results = cp850 */ ;
/*!50003 SET collation_connection  = cp850_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`localhost`*/ /*!50003 TRIGGER `tg_horaSiguiente_BI` BEFORE INSERT ON `tregistros` FOR EACH ROW BEGIN
		IF EXISTS(
			SELECT *
			FROM thorarios AS ho
			INNER JOIN sistema_llaves.taulas  	  AS aul  ON aul.numero = ho.num_aula
			INNER JOIN sistema_llaves.tllaves 	  AS llav ON llav.id_aula = aul.id 
			INNER JOIN sistema_llaves.tmaestros   AS mae  ON mae.num_emp = ho.num_emp_maestro
			INNER JOIN sistema_llaves.tmaterias   AS mat  ON mat.id = ho.id_materia
			INNER JOIN sistema_llaves.tdias_horas AS tdh  ON tdh.id = ho.id_dias_horas
			INNER JOIN sistema_llaves.tdias 	  AS tdi  ON tdi.id = tdh.idDias
			INNER JOIN sistema_llaves.thoras 	  AS tho  ON tho.id = tdh.idHoras
			WHERE mae.num_emp=(SELECT num_emp_maestro FROM thorarios WHERE id=NEW.id_horario)
			AND  tho.hora_inicio=CONCAT(SUBSTRING((NEW.hora_entrada+INTERVAL 1 HOUR),12,2),":00:00") AND llav.ref=NEW.id_horario
			AND  aul.numero=(SELECT num_aula FROM thorarios WHERE id=NEW.id_horario)
			AND tdi.dias LIKE  CONCAT('%',(ELT(WEEKDAY(NEW.hora_entrada) + 1, 'LUNES', 'MARTES', 'MIERCOLES', 'JUEVES', 'VIERNES', 'SABADO', 'DOMINGO')),'%')
			)THEN
			SET @codLlave := (SELECT codigo FROM tllaves WHERE ref=NEW.id_horario);
			SET @idhorario := (SELECT ho.id
				FROM thorarios AS ho
				INNER JOIN sistema_llaves.taulas  	  AS aul  ON aul.numero = ho.num_aula
				INNER JOIN sistema_llaves.tllaves 	  AS llav ON llav.id_aula = aul.id 
				INNER JOIN sistema_llaves.tmaestros   AS mae  ON mae.num_emp = ho.num_emp_maestro
				INNER JOIN sistema_llaves.tmaterias   AS mat  ON mat.id = ho.id_materia
				INNER JOIN sistema_llaves.tdias_horas AS tdh  ON tdh.id = ho.id_dias_horas
				INNER JOIN sistema_llaves.tdias 	  AS tdi  ON tdi.id = tdh.idDias
				INNER JOIN sistema_llaves.thoras 	  AS tho  ON tho.id = tdh.idHoras
				WHERE mae.num_emp=(SELECT num_emp_maestro FROM thorarios WHERE id=NEW.id_horario)
				AND  tho.hora_inicio=CONCAT(SUBSTRING((NEW.hora_entrada+INTERVAL 1 HOUR),12,2),":00:00") AND llav.ref=NEW.id_horario
				AND  aul.numero=(SELECT num_aula FROM thorarios WHERE id=NEW.id_horario)
				AND tdi.dias LIKE  CONCAT('%',(ELT(WEEKDAY(NEW.hora_entrada) + 1, 'LUNES', 'MARTES', 'MIERCOLES', 'JUEVES', 'VIERNES', 'SABADO', 'DOMINGO')),'%')	
			);
			SET @idregistro := (SELECT AUTO_INCREMENT FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA="sistema_llaves" AND TABLE_NAME="tregistros");
			INSERT INTO tcontrolHorarios VALUES(@idregistro,@codLlave,@idhorario,DEFAULT);
		END IF;
	
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;

--
-- Table structure for table `treportes`
--

DROP TABLE IF EXISTS `treportes`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
 SET character_set_client = utf8mb4 ;
CREATE TABLE `treportes` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `fecha_inicio` timestamp NOT NULL,
  `fecha_fin` timestamp NOT NULL,
  `descripcion` varchar(255) NOT NULL,
  `num_aula` int(11) NOT NULL,
  PRIMARY KEY (`id`),
  KEY `FK_treportes_taulas` (`num_aula`),
  CONSTRAINT `FK_treportes_taulas` FOREIGN KEY (`num_aula`) REFERENCES `taulas` (`numero`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_general_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `treportes`
--

LOCK TABLES `treportes` WRITE;
/*!40000 ALTER TABLE `treportes` DISABLE KEYS */;
/*!40000 ALTER TABLE `treportes` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `tusuarios`
--

DROP TABLE IF EXISTS `tusuarios`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
 SET character_set_client = utf8mb4 ;
CREATE TABLE `tusuarios` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `nombre` varchar(150) DEFAULT NULL,
  `contrasena` varchar(255) DEFAULT NULL,
  `rol` char(1) NOT NULL,
  `estado` tinyint(1) DEFAULT '1',
  PRIMARY KEY (`id`),
  UNIQUE KEY `nombre` (`nombre`)
) ENGINE=InnoDB AUTO_INCREMENT=3 DEFAULT CHARSET=utf8 COLLATE=utf8_general_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `tusuarios`
--

LOCK TABLES `tusuarios` WRITE;
/*!40000 ALTER TABLE `tusuarios` DISABLE KEYS */;
INSERT INTO `tusuarios` VALUES (1,'admin','$2y$10$nqr.iOGwmeEpOe.46IPd0eBXa.amkUqLXgY64T9ekPl6z4/nxIsue','1',1),(2,'UsuarioPrueba','$2y$10$01us9PSzRdnzyITHot4/COBTuhg8vOUTAlp2rBTFiFy0CAr4pVGtW','2',1);
/*!40000 ALTER TABLE `tusuarios` ENABLE KEYS */;
UNLOCK TABLES;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = cp850 */ ;
/*!50003 SET character_set_results = cp850 */ ;
/*!50003 SET collation_connection  = cp850_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`localhost`*/ /*!50003 TRIGGER `tg_users_rol_BI` BEFORE INSERT ON `tusuarios` FOR EACH ROW BEGIN
	CALL CHK_user_rol(new.rol);
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = cp850 */ ;
/*!50003 SET character_set_results = cp850 */ ;
/*!50003 SET collation_connection  = cp850_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`localhost`*/ /*!50003 TRIGGER `tg_users_rol_BU` BEFORE UPDATE ON `tusuarios` FOR EACH ROW BEGIN
	CALL CHK_user_rol(new.rol);
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!40103 SET TIME_ZONE=@OLD_TIME_ZONE */;

/*!40101 SET SQL_MODE=@OLD_SQL_MODE */;
/*!40014 SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS */;
/*!40014 SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS */;
/*!40101 SET CHARACTER_SET_CLIENT=@OLD_CHARACTER_SET_CLIENT */;
/*!40101 SET CHARACTER_SET_RESULTS=@OLD_CHARACTER_SET_RESULTS */;
/*!40101 SET COLLATION_CONNECTION=@OLD_COLLATION_CONNECTION */;
/*!40111 SET SQL_NOTES=@OLD_SQL_NOTES */;

-- Dump completed on 2019-09-09 22:18:53
